<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sexta-Feira ‚Äî IA estilo Tony Stark</title>
  <style>
    :root{--bg:#071021;--card:#0b1a2a;--accent:#00e0a3;}
    body{margin:0;font-family:Inter,system-ui;background:#071021;color:#e6f3f1;}
    #chat{height:70vh;overflow:auto;background:#0b1a2a;padding:15px;border-radius:12px;}
    .msg{padding:10px;margin:10px 0;border-radius:10px;max-width:80%;}
    .user{background:#053040;align-self:flex-end;}
    .bot{background:#111f32;}
    .controls{margin-top:20px;display:flex;gap:10px;}
    button{padding:10px 14px;border-radius:10px;border:none;background:#00e0a3;color:#000;font-weight:bold;cursor:pointer;}
    textarea{width:100%;height:80px;padding:10px;border-radius:10px;background:#0b1a2a;color:#e6f3f1;border:1px solid #123;}
  </style>
</head>
<body>

<h2>Sexta-Feira ‚Äî IA Futurista (PT-BR)</h2>

<div id="chat"></div>

<textarea id="textIn" placeholder="Digite aqui ou use o bot√£o falar..."></textarea>

<div class="controls">
  <button id="btnStart">üéôÔ∏è Falar</button>
  <button id="btnAsk">Enviar</button>
</div>

<script>
let apiKey = "AIzaSyBcx3Z_su5b0vkHAOP3KRw1OJz37KeQn5g"; // SUA CHAVE AQUI

function addMsg(text, who="bot"){
  const c = document.getElementById("chat");
  const d = document.createElement("div");
  d.className = "msg " + who;
  d.textContent = text;
  c.appendChild(d);
  c.scrollTop = c.scrollHeight;
}

async function askIA(msg){
  addMsg(msg, "user");

  const resposta = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key="+apiKey,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ contents:[{ role:"user", parts:[{ text: msg }]}] })
  }).then(r=>r.json());

  const txt = resposta.candidates?.[0]?.content?.parts?.[0]?.text || "Erro na resposta";
  addMsg(txt, "bot");
  speak(txt);
}

// fala (TTS)
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "pt-BR";
  speechSynthesis.speak(u);
}

// voz ‚Üí texto
let rec;
if("webkitSpeechRecognition" in window){
  rec = new webkitSpeechRecognition();
  rec.lang = "pt-BR";
  rec.onresult = e => askIA(e.results[0][0].transcript);
}

document.getElementById("btnStart").onclick = ()=> rec && rec.start();
document.getElementById("btnAsk").onclick = ()=> askIA(document.getElementById("textIn").value);
</script>

</body>
</html>
